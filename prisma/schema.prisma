generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Profile {
  id        String    @id @default(cuid())
  email     String    @unique
  fullName  String?   @map("full_name")
  avatarUrl String?   @map("avatar_url")
  role      String?   @default("user")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("profiles")
}

model Client {
  id               Int       @id @default(autoincrement())
  email            String    @unique
  name             String
  phone            String?
  status           String?   @default("active")
  birthDate        DateTime  @map("birth_date") @db.Date
  birthTime        DateTime? @map("birth_time") @db.Time(6)
  birthPlace       String    @map("birth_place")
  question         String
  language         String?   @default("en")
  adminNotes       String?   @map("admin_notes")
  scheduledDate    DateTime? @map("scheduled_date") @db.Date
  scheduledTime    DateTime? @map("scheduled_time") @db.Time(6)
  sessionType      String?   @map("session_type")
  lastReminderSent DateTime? @map("last_reminder_sent") @db.Timestamptz(6)
  lastBooking      DateTime? @map("last_booking") @db.Timestamptz(6)
  createdAt        DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt        DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)
  clientBookings   Booking[] @relation("ClientBookings")

  @@index([email], map: "idx_clients_email")
  @@map("clients")
}

model Schedule {
  id          Int       @id @default(autoincrement())
  dayOfWeek   String    @map("day_of_week")
  startTime   String    @map("start_time")
  endTime     String    @map("end_time")
  isAvailable Boolean?  @default(true) @map("is_available")
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@index([dayOfWeek], map: "idx_schedules_day")
  @@map("schedules")
}

model Booking {
  id          Int       @id @default(autoincrement())
  clientEmail String    @map("client_email")
  sessionDate DateTime  @map("session_date") @db.Date
  sessionTime DateTime  @map("session_time") @db.Time(6)
  sessionType String    @map("session_type")
  status      String?   @default("pending")
  notes       String?
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)
  client      Client    @relation("ClientBookings", fields: [clientEmail], references: [email], onDelete: NoAction, onUpdate: NoAction)

  @@index([clientEmail], map: "idx_bookings_client_email")
  @@index([sessionDate], map: "idx_bookings_date")
  @@map("bookings")
}

model EmailTemplate {
  id           Int       @id @default(autoincrement())
  templateKey  String    @unique @map("template_key")
  subject      String
  body         String
  language     String?   @default("en")
  createdAt    DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt    DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@index([templateKey], map: "idx_email_templates_key")
  @@map("email_templates")
}

model LogoSettings {
  id        Int       @id @default(autoincrement())
  type      String?   @default("text")
  text      String?   @default("SOULPATH")
  imageUrl  String?   @map("image_url")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("logo_settings")
}

model Seo {
  id          Int       @id @default(autoincrement())
  title       String?   @default("SOULPATH - Wellness & Healing")
  description String?   @default("Your journey to wellness starts here. Professional wellness services in a peaceful environment.")
  keywords    String?   @default("wellness, healing, therapy, meditation, soulpath")
  ogImage     String?   @map("og_image")
  createdAt   DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt   DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("seo")
}

model Image {
  id        Int       @id @default(autoincrement())
  name      String
  url       String
  altText   String?   @map("alt_text")
  category  String?   @default("general")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("images")
}

model ProfileImage {
  id        Int       @id @default(autoincrement())
  key       String    @unique
  url       String
  altText   String?   @map("alt_text")
  createdAt DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt DateTime? @default(now()) @updatedAt @map("updated_at") @db.Timestamptz(6)

  @@map("profile_images")
}

model Content {
  id                  Int       @id @default(autoincrement())
  heroTitleEn         String?   @default("Welcome to SOULPATH") @map("hero_title_en")
  heroTitleEs         String?   @default("Bienvenido a SOULPATH") @map("hero_title_es")
  heroSubtitleEn      String?   @default("Your journey to wellness starts here") @map("hero_subtitle_en")
  heroSubtitleEs      String?   @default("Tu camino al bienestar comienza aquí") @map("hero_subtitle_es")
  aboutTitleEn        String?   @default("About Us") @map("about_title_en")
  aboutTitleEs        String?   @default("Sobre Nosotros") @map("about_title_es")
  aboutContentEn      String?   @default("We are dedicated to helping you achieve your wellness goals.") @map("about_content_en")
  aboutContentEs      String?   @default("Estamos dedicados a ayudarte a alcanzar tus metas de bienestar.") @map("about_content_es")
  approachTitleEn     String?   @default("Our Approach") @map("approach_title_en")
  approachTitleEs     String?   @default("Nuestro Enfoque") @map("approach_title_es")
  approachContentEn   String?   @default("We use a holistic approach to wellness.") @map("approach_content_en")
  approachContentEs   String?   @default("Usamos un enfoque holístico para el bienestar.") @map("approach_content_es")
  servicesTitleEn     String?   @default("Our Services") @map("services_title_en")
  servicesTitleEs     String?   @default("Nuestros Servicios") @map("services_title_es")
  servicesContentEn   String?   @default("Professional wellness services in a peaceful environment.") @map("services_content_en")
  servicesContentEs   String?   @default("Servicios profesionales de bienestar en un ambiente pacífico.") @map("services_content_es")
  createdAt           DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt           DateTime? @default(now()) @map("updated_at") @db.Timestamptz(6)

  @@map("content")
}

model EmailConfig {
  id         Int       @id @default(autoincrement())
  smtpHost   String?   @default("smtp.gmail.com") @map("smtp_host")
  smtpPort   Int?      @default(587) @map("smtp_port")
  smtpUser   String?   @default("") @map("smtp_user")
  smtpPass   String?   @default("") @map("smtp_pass")
  fromEmail  String?   @default("noreply@soulpath.lat") @map("from_email")
  fromName   String?   @default("SOULPATH") @map("from_name")
  createdAt  DateTime? @default(now()) @map("created_at") @db.Timestamptz(6)
  updatedAt  DateTime? @default(now()) @map("updated_at") @db.Timestamptz(6)

  @@map("email_config")
}
